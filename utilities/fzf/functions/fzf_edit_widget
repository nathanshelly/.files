#! /usr/bin/env zsh

# edit selected file
# lightly adapted from `fzf-cd-widget`
setopt localoptions pipefail 2> /dev/null
local file="$(
  eval "$FZF_DEFAULT_COMMAND" \
    | FZF_DEFAULT_OPTS="$FZF_DEFAULT_OPTS $FZF_EDIT_OPTS" $(__fzfcmd) +m
  )"

if [[ -z "$file" ]]; then
  zle redisplay
  return 0
fi

"${EDITOR:-nvim}" "$file"

local ret=$?
zle fzf-redraw-prompt
return $ret
