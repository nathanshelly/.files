#! /usr/bin/env bash

# check that DOTFILES variable is defined
# relative path handling is tricky and never foolproof
# refs
#   - http://mywiki.wooledge.org/BashFAQ/028
#   - https://stackoverflow.com/questions/6659689/referring-to-a-file-relative-to-executing-script
# shellcheck disable=SC1090
source "${BASH_SOURCE%/*}/lib/check_dotfiles_variable.sh"

# run in separate subshells

# install Homebrew and packages, casks & mas apps in `$DOTFILES/Brewfile`
"$DOTFILES/setup/bin/install_brew"

# generate `gitconfig.local` @ `$DOTFILES/git/`
"$DOTFILES/setup/bin/setup_git_config"

# install various pieces too small for their own files
# see the file in question for each piece
"$DOTFILES/setup/bin/install_bits_and_pieces"

# run last for other pieces to be installed
# must be after `setup_git_config` to symlink generated file, and after
# `install_bits_and_pieces` to install submodules first
"$DOTFILES/setup/bin/symlink"
